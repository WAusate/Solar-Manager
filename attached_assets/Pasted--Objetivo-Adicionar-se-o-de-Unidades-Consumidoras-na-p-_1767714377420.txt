ğŸ¯ Objetivo:
Adicionar seÃ§Ã£o de "Unidades Consumidoras" na pÃ¡gina de RelatÃ³rios, exibindo os dados salvos na tabela billing_units.

ğŸ“Š Dados DisponÃ­veis no Banco:
Tabela billing_units:

billing_report_id (relacionamento com billing_reports)
codigo_cliente (cÃ³digo da UC)
creditos_recebidos (decimal)
consumo_mes (decimal)
saldo_acumulado (decimal)
eh_geradora (boolean) - identifica a UC geradora


ğŸ¨ Layout a Implementar:
SeÃ§Ã£o: "DistribuiÃ§Ã£o de CrÃ©ditos por Unidade"
Posicionar abaixo do card de resumo mensal (apÃ³s energia injetada/consumida/saldo).
Estilo: Lista vertical com cards/itens para cada unidade.
Estrutura de Cada Item:
[Ãcone UC] UC [CÃ“DIGO] [(Geradora)] se eh_geradora = true

âš¡ CrÃ©ditos Recebidos: [creditos_recebidos] kWh
ğŸ”Œ Consumo do MÃªs: [consumo_mes] kWh
ğŸ’° Saldo Acumulado: [saldo_acumulado] kWh
Exemplo:
ğŸ¢ UC 98097023 (Geradora)
   âš¡ CrÃ©ditos Recebidos: 0 kWh
   ğŸ”Œ Consumo do MÃªs: 112 kWh
   ğŸ’° Saldo Acumulado: 0 kWh

ğŸ  UC 7051574928
   âš¡ CrÃ©ditos Recebidos: 272.17 kWh
   ğŸ”Œ Consumo do MÃªs: 211 kWh
   ğŸ’° Saldo Acumulado: 1,019.85 kWh

ğŸ”§ Requisitos TÃ©cnicos:
1. Query no Backend:
Ao buscar dados de faturamento, fazer JOIN com billing_units:
sqlSELECT 
  br.*,
  json_agg(
    json_build_object(
      'codigo', bu.codigo_cliente,
      'creditos_recebidos', bu.creditos_recebidos,
      'consumo_mes', bu.consumo_mes,
      'saldo_acumulado', bu.saldo_acumulado,
      'eh_geradora', bu.eh_geradora
    )
  ) as unidades
FROM billing_reports br
LEFT JOIN billing_units bu ON bu.billing_report_id = br.id
WHERE br.user_id = [USER_ID] AND br.mes = [MES] AND br.ano = [ANO]
GROUP BY br.id;
2. Estrutura de Dados Esperada:
typescriptinterface BillingReport {
  id: number;
  mes: number;
  ano: number;
  energia_injetada: number;
  energia_consumida: number;
  saldo_credito: number;
  unidades: UnidadeConsumidora[];
}

interface UnidadeConsumidora {
  codigo: string;
  creditos_recebidos: number;
  consumo_mes: number;
  saldo_acumulado: number;
  eh_geradora: boolean;
}
3. Componente Frontend:
Criar componente UnidadesConsumidoras que recebe array de unidades.
Props:
typescriptinterface UnidadesConsumidorasProps {
  unidades: UnidadeConsumidora[];
}

ğŸ¨ EspecificaÃ§Ãµes Visuais:
Container Principal:

TÃ­tulo: "ğŸ“ DistribuiÃ§Ã£o de CrÃ©ditos por Unidade"
EspaÃ§amento: margin-top apÃ³s card de resumo mensal

Item de Unidade:

Se eh_geradora = true:

Ãcone: ğŸ¢
Badge: "(Geradora)" com cor destacada
Opcional: Background diferenciado


Se eh_geradora = false:

Ãcone: ğŸ 
Sem badge



FormataÃ§Ã£o de Valores:

NÃºmeros com 2 casas decimais
Separador de milhar (1.019,85 ou 1,019.85 dependendo do locale)
Unidade "kWh" apÃ³s cada valor

EspaÃ§amento:

Entre unidades: margin-bottom mÃ©dio
Entre linhas de dados: padding pequeno
Ãcones alinhados com texto


ğŸ“± Responsividade:

Desktop: Lista vertical com cards lado a lado (opcional)
Mobile: Lista vertical empilhada
Tablet: Adaptar conforme espaÃ§o


âœ… Checklist de ImplementaÃ§Ã£o:

 Atualizar query do backend para incluir unidades
 Criar interface/type TypeScript (se aplicÃ¡vel)
 Criar componente UnidadesConsumidoras
 Adicionar na pÃ¡gina de RelatÃ³rios
 Renderizar lista de unidades
 Aplicar estilos (Ã­cones, badges, formataÃ§Ã£o)
 Destacar visualmente a UC geradora
 Formatar valores numÃ©ricos corretamente
 Testar responsividade
 Validar com dados reais do banco


ğŸ§ª Dados de Teste:
Usar o registro salvo no banco:

UC 98097023 (Geradora): 0 / 112 / 0
UC 7051574928: 272.17 / 211 / 1019.85
UC 7051590516: 272.17 / 268 / 506.66


ğŸ“ ObservaÃ§Ãµes Importantes:

Badge "(Geradora)" deve ser visualmente destacado
Manter consistÃªncia com design atual do sistema
Usar mesmo padrÃ£o de cores e tipografia
Considerar caso de nenhuma unidade (nÃ£o deve acontecer, mas tratar)
Ordenar: Geradora primeiro, depois demais UCs


ğŸ¯ Resultado Esperado:
Ao acessar a pÃ¡gina de RelatÃ³rios, o usuÃ¡rio deve ver:

Card de resumo mensal (jÃ¡ existe)
Nova seÃ§Ã£o de Unidades Consumidoras (implementar)
Cada UC listada com seus dados claros e formatados
UC geradora visualmente destacada


Execute essas implementaÃ§Ãµes.